                    Экранный отладчик DBG

                           MSX/MSX2

                          Бараз Л.С.

   Программа DBG представляет собой экранный отладчик программ,
написанных на языке ассемблера  процессора Z80.  Этот  отладчик
может использоваться на ПЭВМ MSX2 и MSX,  оснащенных  видеопро-
цессором VDP 9938 ("YAMAHA" YIS503II), под управлением операци-
онной системы MSX-DOS.

   DBG предоставляет пользователю следующий набор возможностей:
- загрузка в память и запись на диск программ вместе с таблица-
  ми символических имен (программы могут располагаться в  любых
  интервалах адресов в любой конфигурации памяти);
- просмотр и корректировка содержимого всех страниц памяти ПЭВМ
  (с учетом слота и страницы маппера) в символьном и шестнадца-
  тиричном формате, а также в виде ассемблерных команд;
- просмотр и корректировка содержимого видеопамяти в символьном
  и шестнадцатиричном формате;
- просмотр и изменение содержимого регистров;
- установка и снятие точек приостанова (со счетчиками);
- установка и снятие контроля изменения байтов памяти;
- использование символических имен взамен адреса (в том числе в
  текстах ассемблерных команд); имена можно  настроить  на  на-
  чальный адрес программы;
- покомандное и непрерывное выполнение программы (в том числе в
  режиме мультипликации); управление возвращается отладчику при
  достижении точки приостанова с нулевым счетчиком, при измене-
  нии одного из контролируемых байтов  памяти,  при  нормальном
  завершении программы, при нажатии клавиши <STOP>); в процессе
  выполнения по всем символическим именам программы подсчитыва-
  ются профили;
- показ состояния экрана ПЭВМ в момент  приостановки  программы
  (в том числе и при использовании графических режимов  видеоп-
  роцессора);
- пересылка и заполнение областей памяти, поиск символьного или
  шестнадцатиричного образца;
- выполнение  арифметических  действий  над  шестнадцатиричными
  числами;
- получение на экране краткой информации о средствах, имеющихся
  в отладчике.

   В отличие от большинства известных отладчиков для MSX, боль-
шая часть функций отладчика DBG обеспечивается изменением неко-
торых полей непосредственно на экране; при этом  все  остальные
поля приводятся (по возможности) в  соответствие  с  содержимым
измененного поля. Это облегчает пользователю построение сложных
запросов, позволяет естественным образом  отображать  умалчива-
емые значения полей и  в  некоторых  случаях  дает  возможность
прогнозировать, как выполнится запрос пользователя в том  виде,
в каком он задан в данный момент. Кроме того, при этом исключа-
ется ситуация, когда на экране сохраняется информация, не соот-
ветствующая действительному состоянию ПЭВМ.

   Предлагаемая версия отладчика DBG (в отличие от  распростра-
нявшихся ранее свободно) обеспечивает большую свободу манипуля-
ций с параллельными страницами памяти ПЭВМ (разрешен доступ  на
чтение/запись к любым страницам на всем адресном  пространстве;
загрузка в память и запись на диск файлов теперь может произво-
диться при любой конфигурации памяти).  Значительно  расширенны
возможности отладки программ, использующих  графические  режимы
VDP; в частности, добавлены  средства  изменения  адресов  соб-
ственных областей VRAM отладчика. Кроме того, исправлены  обна-
руженные в предыдущих версиях отладчика ошибки.

   В комплект поставки входят собственно отладчик и файл  доку-
ментации.

   Примеры отображения информации на экране:
NA
             Режим листинга ассемблера
EB>
                        окно заголовка
        XWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWY

X02000RWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWRWWWWWWWWWWWWWWWWY
VList V DEBUGGER Version 5.0        Help:<Esc>?  Visual:Trace V EI PC=D827 I=00V
TWWWWWUWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWRWWWWS8B/02/8B/8B R=58V
V     V       7FF8:60           LD    H,B                V    VFB/FA/F9/F8 +MAPV
V     V       7FF9:4B           LD    C,E                V    VT=882B:D0C1/323CV
V00~00V       7FFA:03           INC   BC                 V    TWWWWWWWWWWWWWWWWS
V     V       7FFB:1A           LD    A,(DE)             V    V A=00 . sZxHxpNCV
V     V       7FFC:FE 38        CP    38                 V    V BC=0240: 00  . V
V     V       7FFE:FF           RST   38                 V    V DE=0000: C3 "ц"V
V     V       7FFF:FF           RST   38                 V    V HL=7FFD: 38 "8"V
V     VMEM80@:8000:00           NOP                      V0078V IX=1377: 2A "*"V
VC0-C0V       8001:00           NOP                      V    V IY=0A00: 53 "S"V
V     V       8002:00           NOP                      V    TWWWWWWWWWWWWWWWWS
V20+1AV       8003:20 FB        JR    NZ,MEM80@:8000     V    VA'=00 . szxhxpncV
V     V       8005:DD 2A 08 80  LD    IX,(PRED:8008)     V    VBC'=0120: E1 "А"V
V00+00V       8009:C1           POP   BC                 V    VDE'=0A00: 53 "S"V
V     V       800A:CD CD D9     CALL  D9CD               V    VHL'=1100: 0E  . V
TWRWWWQWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWQWWWWUWWWWWWWWWWWWWWWWS
V V       3FC0:E7 38 EB 2A E9 38 7D 93 6F 7C 9A 67 22 EB 38 2AVГ8К*И8}.o|.g"К8*V
V-V       3FD0:E7 38 EB 21 18 39 C3 0A 1F CD 36 11 22 E9 38 EBVГ8К!.9ц..м6."И8КV
V V       3FE0:2A E7 38 7B 95 6F 7A 9C 67 22 EB 38 2A E9 38 EBV*Г8{.oz.g"К8*И8КV
V+V       3FF0:21 1E 39 C3 0A 1F 0E 07 25 3D 20 03 E9 3C 32 03V!.9ц....%= .И<2.V
V VDRIVER:4000:41 42 6F 57 76 65 00 00 00 00 00 00 00 00 00 00VABoWve..........V
V V       4010:C3 F5 74 C3 86 78 C3 09 79 C3 23 79 C3 50 79 C3VцУtц.xц.yц#yцPyцV
V~V       4020:82 78 C3 35 5B 37 C3 AC 60 C3 14 62 00 C3 AE 5FV.xц5[7ц╛`ц.b.ц╝_V
V V       4030:2A 4B F3 C9 DD E5 DD 21 B7 00 CD AB 40 DD E1 30V*KСищЕщ!╥.м╚@щА0V
ZWQWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWQWWWWWWWWWWWWWWWW[

NA
             Режим загрузки программы
EB>
                           окно запроса
                    (дополнительное окно файлов)
        XWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWY

X1F000RWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWRWWWWWWWWWWWWWWWWY
VInputV File:B:prog    .COM  Area:07F0-8A1B  Reloc:0100->07F0 V EI PC=0100 I=00V
TWWWWWUWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWRWWWWS8B/8B/8B/8B R=7BV
V     V       012F:CB 16        RL    (HL)               V    V--/--/--/-- -MAPV
V     V       0131:30 0F        JR    NC,0142            V    VT=8A1A:CFC5/75C3V
V     V       0133:E5           PUSH  HL                 V    TWWWWWWWWWWWWWWWWS
V     V       0134:DD 66 00     LD    H,(IX+00)          V    V A=00 . szxhxpncV
V     V       0137:DD 6E FF     LD    L,(IX-01)          V    V BC=0000: C3 "ц"V
V     V       013A:19           ADD   HL,DE              V    V DE=0000: C3 "ц"V
V     V       013B:DD 74 00     LD    (IX+00),H          V    V HL=0000: C3 "ц"V
V     V       013E:DD 75 FF     LD    (IX-01),L          V    V IX=0000: C3 "ц"V
V     V       0141:E1           POP   HL                 V    V IY=0000: C3 "ц"V
V     V       0142:DD 23        INC   IX                 V    TWWWWWWWWWWWWWWWWS
V     V       0144:0B           DEC   BC                 V    VA'=00 . szxhxpncV
V     V       0145:78           LD    A,B                V    VBC'=0000: C3 "ц"V
V     V       0146:B1           OR    C                  V    VDE'=0000: C3 "ц"V
V     V       0147:20 DF        JR    NZ,0128            V    VHL'=0000: C3 "ц"V
TWRWWWQWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWQWWWWUWWWWWWWWWWWWWWWWS
VVV      1F020:17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17V................V
VVV      1F030:17 17 17 17 17 17 17 17 17 17 17 17 17 17 12 17V................V
VVV      1F040:17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 19V................V
VVV      1F050:16 49 6E 70 75 74 16 20 46 69 6C 65 3A 20 70 72V.Input. File:B:PV
VVV      1F060:6F 67 20 20 20 20 20 20 20 20 41 72 65 61 3A 20VROG    .COM  AreV
VVV      1F070:30 37 46 30 2D 38 41 31 42 20 20 52 65 6C 6F 63Va:07F0-8A1B  RelV
VVV      1F080:3A 20 30 31 30 30 2D 3E 30 37 46 30 20 20 16 20Voc:0100->07F0 . V
VVV      1F090:45 49 20 50 43 3D 30 31 30 30 20 52 3D 37 42 16VEI PC=0100     .V
ZWQWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWQWWWWWWWWWWWWWWWW[
NA
