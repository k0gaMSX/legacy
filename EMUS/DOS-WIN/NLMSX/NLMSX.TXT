NLMSX v0.38 (http://nlmsx.generation-msx.nl)
MSX emulator for Windows 95/98/NT/2000, DirectX 3 or higher
By Frits Hilderink


Table of contents
-----------------

    Introduction
    Features
    MSX-Emulator Keyboard
    Configuring NLMSX
		Available Configurations
        Configuration details
        Keyboard Layout
	Buttons
    Default Configurations
    Command line parameters
    Statusbar
    Bug Report
    Thanks to


Introduction
------------
NLMSX is a msx1/msx2/msx2+ emulator that is based upon fMSX 2.0b made by 
Marat Fayzullin and is being developed by Frits Hilderink, a former member 
of MSX Computer Club Enschede in the Netherlands. 

As of NLMSX v0.20 only the Z80 emulation part is used from 
the original fMSX 2.0b source. 


Features
--------
NLMSX has the current features:

- Emulates MSX-1,2,2+
- MSX-DOS 2 emulation
- Texas Instruments 279x diskcontroller emulation
- Support for two disk drives
- Konami MegaROM Emulation
- ASCII MegaROM Emulation
- PSG emulation
- SCC/SCC+ emulation
- YM2413 emulation (FM-PAC)
- V9918/V9938/V9958 Emulation in both PAL and NTSC modes
- ...


MSX-Emulator Keyboard
---------------------

MSX-Key	Windows-Key

F1	F1
F2	F2
F3	F3
F4	F4
F5	F5
F6	Shift+F1
F7	Shift+F2
F8	Shift+F3
F9	Shift+F4
F10	Shift+F5

Special keys:

MSX-Key		Windows-Key

Select	        End
Stop	        Page Up
Home/Cls	Home
Kana (japanese)	Page Down
Code	        Page Down
Graph         	F8
Caps	        Caps Lock


Notes:
- Kana and Code have the same scancode and therefore are exclusively available
  on different keyboard layouts (common: Kana toggles the kanji keyboard mode,
  Code must be used simultaneously with other keys to produce code-characters).

Very special keys:

Change Disk A:          F6
Change Disk B:          F7
Screenshot              F9
Reset                   F12
FullScreen              ALT+ENTER


Configurations
--------------

With NLMSX configurations can be made using the Edit Configuration dialog.
This dialog currently has a treeview on the left side that contains an
overview of the available configurations. On the right side is an overview
of the details of the selected configuration.

	Available Configurations
	-------------
	
	The whole directory structure starting from the 'Config' directory is
	searched for files with the name 'config.ini'. Each file represents a
	full configuration and the directory serves as the configuration name.

    Configuration details
    -------------

    This layout describes the types of memory that are available in the
	selected configuration. Double clicking or selected a line in the
	Configuration details list and selecting 'Edit' shows a dialog box
	which can be used to configure that particular slot.
	
	These types of memory can be selected in a mainslot or subslot:

    - Undefined
    
      Specifies an empty mainslot/subslot.
      
    - Normal ROM
    
      Specifies to place a normal ROM image on a mainslot/subslot.
      Parameters: ROM Image, Image Start, Image Length, Start Address.
    
    - Normal RAM
    
      Specifies a non memory mapped RAM area on a mainslot/subslot.
      Parameters: Start Address, RAM Size.
      
    - Memory Mapper

      Specifies a memory mapper on a mainslot/subslot.

      Parameters: Mapper Size.
      Remarks: -

    - Disk rom, Memory Mapped, TMS279x

      Specifies a disk rom image with a special memory mapped I/O interface
      linked to a emulated Texas Instruments 279x diskcontroller. Every
      specifies disk rom has it's own diskcontroller, thus enabling support
      for multiple disk drives (2, 4, 6 or 8 drives).

      Parameters: ROM Image, Image Start, Image Length.
      Remarks: Only the disk image of the first drive is currently available.

    - MSX-DOS 2 ROM

      Specifies a MSX-DOS 2 Cartridge on a mainslot/subslot.
      Parameters: ROM Image.

    - Konami4 no SCC

      Specifies a Konami MegaROM Cartridge with memory mapped I/O at the
      addresses 4000, 6000, 8000 and A000. This type is only used for
      cartridges that have no SCC. Like:
      Metal Gear, USAS, Nemesis, Shalow, Vampire Killer, Maze Of Galious, etc..

      Parameters: ROM Image.
      Remarks: Cartridges with sizes of 16Kbyte or 32Kbyte can also be used
      with this memory type.

    - Konami5 SCC

      Specifies a Konami MegaROM Cartridge with memory mapped I/O at the
      addresses 5000, 7000, 9000 and B000. This type is only used for
      cartridges that do have an SCC. Like:
      F1 Spirit, Metal Gear 2, Nemesis 2, Salamander, Nemesis 3, Parodius,
      Space Manbow, Contra, Quarth, Pennant Race 2, Kings Valley 2, etc..

      Parameters: ROM Image.
      Remarks: Cartridges with sizes of 16Kbyte or 32Kbyte can also be used
      with this memory type. If this is empty then a SCC is added without
      the a ROM contents, and thus making it available for other purposes.

    - Konami5 SCC+

      Specifies a Konami SCC Cartridge with memory mapped I/O at the
      addresses 5000, 7000, 9000 and B000. This type is only used for
      SD-Snatcher, The-Snatcher and the Konami Games Collection.
      NLMSX emulates this type of cartridge with a total of 128KByte of RAM,
      and thereby making it compatible for both Snatcher's.

      Parameters: none.
      Remarks: none.

    - Cartridge A

      Specifies the place for Cartridge B. The exact parameters can be given
      on the command line. The parameters can specify any of the above
      possible configurations except the type Cartridge A/B.

      Parameters: Must be specified trough the commandline.
      Remarks: Command line parameters are not yet available.

    - Cartridge B

      Specifies the place for Cartridge B. The exact parameters can be given
      on the command line. The parameters can specify any of the above
      possible configurations except the type Cartridge A/B.

      Parameters: Must be specified through the commandline.
      Remarks: Commandline parameters are not yet available.


    Parameter information:
    
    - ROM Image

      Specifies the file name of the image to load. It may contain spaces.
      If there is no absolute pathname, then the position is relative
      to the position of NLMSX it self.

    - Image Start

      Specifies the start of the first byte of the image to be read.
      For example: use 7 if the specified ROM file is a 'BSAVE' file.
      
      Remarks: There no autodetection for BSAVE'D files or normal files.

    - Image Length

      Specifies the length of the image to be read. A value of zero results in
      reading the complete file. This is the default.

    - Start Address

      Specifies the start address within the Z80 addressing space.

    - Mapper Size

      Specifies the size of the memory mapper. Possible sizes:
        64 KByte, 128 KByte, 256 KByte, 512 KByte, 1 MByte, 2 MByte, 4 MByte.

	- RAM Size

      Specifies the size of the Normal RAM block. Possible sizes:
        0x4000 (16 KByte), 0x8000 (32 KByte), 0xC000 (48 KByte), 0x10000 (64 KByte)

    Keyboard Layout
    ---------------

    Not yet available.


    Buttons
    -------

    The following buttons are available:
    
    - OK

      Continues the emulation if nothing has been changed to the
	  selected configuration. Otherwise asks to 'Discard Changes'
	  and then continue the emulation.

    - Cancel

      Discards all changes and quits the Edit Configuration dialog
	  without asking.

    - Save

      Saves all changes to the corresponding configuration file. This button
	  is only available to a configuration that is not marked with 'Current'.

    - Apply To Emulation

      Applies all changes to the currently running emulation process. Changing
      or removing ROM images from the running process will most likely reset
      the MSX, if the ROM image is actually used.

      Remarks: This button is only available in the configuration marked with
      '(Current)'.
	  
    - Run This Configuration

      Starts the selected configuration immediately if nothing has been
	  changed to the selected configuration. Otherwise asks to
	  'Discard Changes' and then start the selected emulation.

    - Set As Default Configuration
	

Default Configurations
----------------------
Default the following configurations are delivered by the emulator:

MSX

Slot 0:   32KB BIOS-ROM
Slot 1:   Cartridge slot A
Slot 2:   16KB Disk-ROM
Slot 3:   64KB RAM
Specials: TMS9918 video (16KB), 50Hz (PAL)

MSX-2
Slot 0:   32KB BIOS-ROM
Slot 1:   Cartridge slot A
Slot 2:   Cartridge slot B
Slot 3-0: 16KB FM-PAC ROM
Slot 3-1: 16KB SubROM
Slot 3-2: 2MB RAM-Mapper
Slot 3-3: 16KB Disk-ROM (TMS279x)
Specials: V9938 video (128KB), 50Hz (PAL), CMOS, MSX-DOS 2

MSX-2+
Slot 0:   32KB BIOS-ROM
Slot 1:   Cartridge slot A
Slot 2:   Cartridge slot B
Slot 3-0: 16KB FM-PAC ROM
Slot 3-1: 16KB SubROM
Slot 3-2: 2MB RAM-Mapper
Slot 3-3: 16KB Disk-ROM (TMS279x)
Specials: V9958 video (128KB), 60Hz (NTSC), CMOS, 128KB Kanji-ROM, MSX-DOS 2

MSX-2 Arabic
Slot 0-0: 32KB BIOS-ROM
Slot 0-1: 32KB Microsoft & Alalamiah DISK BASIC ROM
Slot 0-2: 32KB Arabic word processor
Slot 1:   Cartridge slot A
Slot 2:   Cartridge slot B
Slot 3-0: Yamaha Painter
Slot 3-1: 16KB SubROM
Slot 3-2: 16KB Disk-ROM (TMS279x)
Slot 3-3: 128KB RAM-Mapper

Remarks: The standard disk-rom is used because the original
         disk-rom from this Arabic MSX-2 is not supported.

New configurations can be made and saved for later use. It's also possible to 
change the configuration during the emulation !


Command line parameters
-----------------------

The following command line parameters are available:

- /Config <configuration name>

  Specifies the configuration to use, instead of the default configuration.

- /DriveA <disk image>
  /DriveB <disk image>
  /DriveC <disk image>
  /DriveD <disk image>
  /DriveE <disk image>
  /DriveF <disk image>
  /DriveG <disk image>
  /DriveH <disk image>

  Specifies the disk image to use for the corresponding drive. The disk image
  can be 360Kbyte (Single Sided) or 720KByte (Double Sided). Read-only images
  are opened as if they are write protected. Disk images are not locked and can
  be changed on the fly outside of the emulator, but changing the contents
  outside of the emulator can/will lead to inconsistencies.

- /CartA thru /CartP or
  /Cart1 thru /Cart16

  Specifies that the upcoming parameters /MT, /RI, /IS, /IL, /SA and /MS are
  to be used for the addressed cartridge.

  There is a maximum of 16 possible cartridges.
  CartA or Cart1 is te default cartridges that is addressed.

- /MT  <memory type>

  Specifies the used memory type for cartridge A or B. Possible values are:

      0  Undefined
      1  Normal ROM
      2  Normal RAM
      3  Memory Mapper
      4  Disk rom, Memory Mapped, TMS279x
      5  MSX-DOS 2 ROM
      6  Konami4 no SCC
      7  Konami5 SCC
      8  Konami SCC+
      9  ASCII 8Kbyte
      10 ASCII 16Kbyte

- /RI <ROM Image>

  Specifies the file name of the image to load. It may contain spaces.
  If there is no absolute pathname, then the position is relative
  to the position of NLMSX it self.

- /IS <Image Start>

  Specifies the start of the first byte of the image to be read.
  For example: use 7 if the specified ROM file is a 'BSAVE' file.

- /IL <Image Length>

  Specifies the length of the image to be read. A value of zero results in
  reading the complete file. This is the default.

- /SA <Start Address>

  Specifies the start address within the Z80 addressing space.

- /MS <Mapper Size>

  Specifies the size of the memory mapper. Possible sizes:

    0   64 KByte
    1  128 KByte
    2  256 KByte
    3  512 KByte
    4    1 MByte
    5    2 MByte
    6    4 MByte

- /RS <RAM Size>

  Specifies the size of the memory mapper. Possible sizes:

    0x4000   16 KByte
    0x8000   32 KByte
    0xC000   48 KByte
    0x10000  64 KByte
	
- /FullScreen

  Start NLMSX in fullscreen mode immediately. It is possible to change
  back to Windowed mode by using ALT-ENTER.

Examples:

  ; Just a the MSX-DOS cartridge.
  nlmsx.exe /CartA /MT 5 /RI roms\msxdos2.rom

  ; A konami megarom cartridge without SCC.
  nlmsx.exe /CartA /MT 6 /RI ..\megaroms\vkiller.rom

  ; A konami megarom cartridge with SCC.
  nlmsx.exe /CartA /MT 7 /RI ..\megaroms\mgear2.rom

  ; A combination that brings up special possibilities in Nemesis 2 !
  nlmsx.exe /CartA /MT 7 /RI ..\megaroms\nemesis2.rom
            /CartB /MT 6 /RI ..\megaroms\usas.rom

  ; A 4 megabyte memory mapper with an extra disk rom.
  ; This configuration will have a total of four diskdrives.
  nlmsx.exe /CartA /MT 3 /MS 6
            /CartB /MT 4 /RI roms\disk.rom

  ; The painter.rom.
  nlmsx.exe /carta /mt 1 /ri roms\painter.rom /il 0x10000 /sa 0
  
  ; NLMSX with a Normal RAM block of 16 kbyte
  ; at address 0x4000-7fff
  nlmsx /CartA /mt 2 /sa 0x4000 /rs 0x4000


Statusbar
----------
The statusbar gives the following information:
- With Screen + frames/second


Bug Report
----------
You can report bug's at hilderink@home.nl


Thanks to
---------
I want to thank the following people for helping me:

- Sandy Pleyte (Website and Idea's and a lot more)
- Arnaud de Klerk (Idea's and lot of other things)
- Thijs v.d. Veen
- Hans Otten
- Remco Seesink
- Daniel González (Testing)
- Sean Young (Interrupt handling ideas)
- Laurens Holst (Interrupt handling ideas)
- Khaled (for the Arabic MSX-2 roms)
- Husni Lutfi (testing and a working arabic painter.rom)
- Mitsutaka Okazaki for his excellent YM2413 emulation
  (http://www.angel.ne.jp/~okazaki/ym2413/)
- Tatsuyuki Satoh for his Y8950 emulation
- Vincent van Dam for his add-on regarding the loading of
  sound samples in the Y8950 emulation)
- Johan Veenstra, for testing FM-Pac emulation
                  for testing Y8950 emulation and sending me the code.
  
and all the MSX people who support or use this emulator.


--
[EOF]
